<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸŠ ê°ê·¤ ì‹¤í—˜ì‹¤ ğŸŠ</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background: #fffaf0;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h2 {
      text-align: center;
      color: #ff7f50;
      margin-top: 5px;
      margin-bottom: 10px;
      font-size: 1.5em;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      background: #ffffff;
      border: 2px solid #ffa94d;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(255, 140, 0, 0.2);
      display: flex;
      flex-direction: row;
      align-items: center;
    }
    .sliders {
      flex: 2;
      max-height: 90vh;
      overflow-y: auto;
    }
    .slider-group {
      margin-bottom: 15px;
    }
    label {
      font-weight: bold;
      color: #ff8c00;
      font-size: 0.9em;
    }
    input[type=range] {
      width: 65%;
      height: 6px;
      border-radius: 4px;
      background: #ffd8a8;
      accent-color: #ff9933;
      outline: none;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #ff7f50;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 0 2px rgba(0,0,0,0.3);
      margin-top: -4px;
    }
    span.value {
      font-weight: bold;
      margin-left: 6px;
      font-size: 0.85em;
      color: #ff4500;
    }
    .prediction-circle {
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffb347, #ff7f50);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(255, 120, 0, 0.3);
      border: 3px solid #ff9933;
      font-size: 1.4em;
      font-weight: bold;
      color: white;
      text-align: center;
      position: sticky;
      top: 100px;
      margin-right: 80px;
      flex-shrink: 0;
      transition: background 0.3s ease;
    }
    .prediction-circle::after {
      content: "ğŸŠ";
      position: absolute;
      top: -30px;
      font-size: 2.2em;
    }
  </style>
</head>
<body>
  <h2>ğŸŠ ê°ê·¤ ì‹¤í—˜ì‹¤ ğŸŠ</h2>
  <div class="container">

    <div class="sliders">

      <div class="slider-group">
        <label>ğŸ§¡ ì‚¬ëŒë“¤ì´ ê·¤ì„ ë” ë§ì´ ë¨¹ëŠ”ë‹¤ë©´?</label><br>
        <input type="range" id="ê°ê·¤_ê³¼ì¼ì†Œë¹„ëŸ‰" min="5" max="20" step="0.1" value="12" oninput="updatePrediction()">
        <span class="value" id="val_ê°ê·¤_ê³¼ì¼ì†Œë¹„ëŸ‰">12</span>
      </div>
      <div class="slider-group">
        <label>ğŸ‘ ì‚¬ëŒë“¤ì´ ë³µìˆ­ì•„ë¥¼ ë” ë§ì´ ë¨¹ëŠ”ë‹¤ë©´?</label><br>
        <input type="range" id="ë³µìˆ­ì•„_ê³¼ì¼ì†Œë¹„ëŸ‰" min="2" max="6" step="0.1" value="3.5" oninput="updatePrediction()">
        <span class="value" id="val_ë³µìˆ­ì•„_ê³¼ì¼ì†Œë¹„ëŸ‰">3.5</span>
      </div>

      <div class="slider-group">
        <label>ğŸŒ³ ë…¸ì§€ ì˜¨ì£¼ë°€ê° ìƒì‚°ì„±ì´ ë†’ì•„ì§„ë‹¤ë©´?</label><br>
        <input type="range" id="ë…¸ì§€_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±" min="20" max="40" step="0.1" value="30" oninput="updatePrediction()">
        <span class="value" id="val_ë…¸ì§€_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±">30</span>
      </div>
      <div class="slider-group">
        <label>ğŸ  í•˜ìš°ìŠ¤ ì˜¨ì£¼ë°€ê° ìƒì‚°ì„±ì´ ì¢‹ì•„ì§„ë‹¤ë©´?</label><br>
        <input type="range" id="í•˜ìš°ìŠ¤_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±" min="20" max="40" step="0.1" value="25" oninput="updatePrediction()">
        <span class="value" id="val_í•˜ìš°ìŠ¤_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±">25</span>
      </div>
      <div class="slider-group">
        <label>â„ï¸ ì›”ë™ ì˜¨ì£¼ë°€ê° ìƒì‚°ì„±ì´ ì¢‹ì•„ì§„ë‹¤ë©´?</label><br>
        <input type="range" id="ì›”ë™_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±" min="20" max="40" step="0.1" value="28" oninput="updatePrediction()">
        <span class="value" id="val_ì›”ë™_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±">28</span>
      </div>

      <div class="slider-group">
        <label>ğŸ’¨ í‰ê·  ë°”ëŒì„¸ê¸°ê°€ ê°•í•´ì§„ë‹¤ë©´?</label><br>
        <input type="range" id="WS_AVG" min="14" max="19" step="0.1" value="16" oninput="updatePrediction()">
        <span class="value" id="val_WS_AVG">16</span>
      </div>
      <div class="slider-group">
        <label>â˜” ë¹„ ì˜¤ëŠ” ë‚ ì´ ë§ì•„ì§„ë‹¤ë©´?</label><br>
        <input type="range" id="RN_DAY" min="1000" max="1300" step="10" value="1150" oninput="updatePrediction()">
        <span class="value" id="val_RN_DAY">1150</span>
      </div>

      <div class="slider-group">
        <label>âœˆï¸ í•´ì™¸ì—ì„œ í•œêµ­ ê°ê·¤ì„ ë” ì°¾ëŠ”ë‹¤ë©´?</label><br>
        <input type="range" id="ê°ê·¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰" min="1000" max="7000" step="100" value="4000" oninput="updatePrediction()">
        <span class="value" id="val_ê°ê·¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰">4000</span>
      </div>
      <div class="slider-group">
        <label>ğŸ¥¤ í•´ì™¸ì—ì„œ í•œêµ­ì‚° ê³¼ì¼ì£¼ìŠ¤ë¥¼ ë” ì›í•œë‹¤ë©´?</label><br>
        <input type="range" id="ê³¼ì‹¤ì£¼ìŠ¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰" min="50000" max="150000" step="1000" value="100000" oninput="updatePrediction()">
        <span class="value" id="val_ê³¼ì‹¤ì£¼ìŠ¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰">100000</span>
      </div>

      <div class="slider-group">
        <label>ğŸŒ± ê°ê·¤ë°­ ë©´ì ì´ ë” ë„“ì–´ì§„ë‹¤ë©´?</label><br>
        <input type="range" id="ê°ê·¤_ë©´ì " min="20" max="30" step="0.1" value="22" oninput="updatePrediction()">
        <span class="value" id="val_ê°ê·¤_ë©´ì ">22</span>
      </div>

    </div>

    <div class="prediction-circle" id="prediction-circle">
      <div>
        <div>ì˜ˆì¸¡ ìƒì‚°ëŸ‰</div>
        <span id="prediction">---</span><span style="font-size:0.7em; opacity:0.8;"> ì²œí†¤</span>
      </div>
    </div>
  </div>

  <script>
    async function updatePrediction() {
      const inputData = {
        "ê°ê·¤_ê³¼ì¼ì†Œë¹„ëŸ‰": parseFloat(document.getElementById("ê°ê·¤_ê³¼ì¼ì†Œë¹„ëŸ‰").value),
        "ë³µìˆ­ì•„_ê³¼ì¼ì†Œë¹„ëŸ‰": parseFloat(document.getElementById("ë³µìˆ­ì•„_ê³¼ì¼ì†Œë¹„ëŸ‰").value),
        "ë…¸ì§€_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±": parseFloat(document.getElementById("ë…¸ì§€_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±").value),
        "í•˜ìš°ìŠ¤_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±": parseFloat(document.getElementById("í•˜ìš°ìŠ¤_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±").value),
        "ì›”ë™_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±": parseFloat(document.getElementById("ì›”ë™_ì˜¨ì£¼ë°€ê°_ìƒì‚°ì„±").value),
        "WS_AVG": parseFloat(document.getElementById("WS_AVG").value),
        "RN_DAY": parseFloat(document.getElementById("RN_DAY").value),
        "ê°ê·¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰": parseFloat(document.getElementById("ê°ê·¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰").value),
        "ê³¼ì‹¤ì£¼ìŠ¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰": parseFloat(document.getElementById("ê³¼ì‹¤ì£¼ìŠ¤_ê³¼ì¼ìˆ˜ì¶œëŸ‰").value),
        "ê°ê·¤_ë©´ì ": parseFloat(document.getElementById("ê°ê·¤_ë©´ì ").value)
      };

      for (let key in inputData) {
        document.getElementById("val_" + key).innerText = inputData[key];
      }

      const response = await fetch("http://127.0.0.1:8000/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(inputData)
      });

      const data = await response.json();
      const y_pred = data.y_pred;

      document.getElementById("prediction").innerText = y_pred.toFixed(2);

      const circle = document.getElementById("prediction-circle");
      const minVal = 380;
      const maxVal = 840;
      const ratio = Math.min(1, Math.max(0, (y_pred - minVal) / (maxVal - minVal)));

      const startColor = {r: 255, g: 200, b: 120};
      const endColor   = {r: 255, g: 100, b: 50};
      const r = Math.round(startColor.r + ratio * (endColor.r - startColor.r));
      const g = Math.round(startColor.g + ratio * (endColor.g - startColor.g));
      const b = Math.round(startColor.b + ratio * (endColor.b - startColor.b));

      circle.style.background = `radial-gradient(circle at 30% 30%, rgb(${r},${g},${b}), #ff7f50)`;
    }

    updatePrediction();
  </script>
</body>
</html>
